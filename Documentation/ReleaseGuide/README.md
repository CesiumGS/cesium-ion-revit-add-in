# Releasing a new version of Cesium ion for Autodesk Revit

This is the process we follow when releasing a new version of Cesium ion for Autodesk Revit on GitHub and the Autodesk app store.

Inno Setup is required for generating installers.  It can be downloaded [here](https://jrsoftware.org/isdl.php).

1. Cesium ion for Autodesk Revit does not currently use CI to produce a build, so releases are currently generated on developers' systems.  It is crucial you work with a clean copy of the main branch.  If in doubt, run `git reset --hard` and `git clean -x -d -f` prior to starting.
2. Update `AppVersion` and `FriendlyVersion` in [PackageContext.xml](/AddinBundle/CesiumIonRevitAddin.bundle/PackageContents.xml), along with updating each `Version` entry for each add-in listed in the file.
3. Update `AssemblyVersion`, `AssemblyFileVersion` and `AssemblyInformationVersion` in the following files: 

- [/CesiumIonRevitAddin_2022/Properties/AssemblyInfo.cs](/CesiumIonRevitAddin_2022/Properties/AssemblyInfo.cs)
- [/CesiumIonRevitAddin_2023/Properties/AssemblyInfo.cs](/CesiumIonRevitAddin_2023/Properties/AssemblyInfo.cs)
- [/CesiumIonRevitAddin_2024/Properties/AssemblyInfo.cs](/CesiumIonRevitAddin_2024/Properties/AssemblyInfo.cs)
- [/CesiumIonRevitAddin_2025/Properties/AssemblyInfo.cs](/CesiumIonRevitAddin_2025/Properties/AssemblyInfo.cs)

4. Update `MyAppVersion` in [installer.iss](/AddinBundle/installer.iss
)
5. Update [`CHANGES.md`](../../CHANGES.md).
6. Create a branch, e.g. `git checkout -b release-0.0.0`.
7. Commit the changes, e.g. `git commit -am "0.0.0 release"`.
8. Push the commit, e.g. `git push origin release-0.0.0`.
9. Open a PR and merge the branch with "Rebase and merge".
10. Tag the release, e.g. `git tag -a v0.0.0 -m "0.0.0 release"`.
11. Push the tag, e.g. `git push origin v0.0.0`.
12. Generate a new Release bundle by following **Creating a Bundle** in the [Developer Guide](/Documentation/DeveloperGuide/README.md)
13. In the bundle, digitally sign `CesiumIonRevitAddin.dll` for each version of Revit.
14. Open [installer.iss](/AddinBundle/installer.iss) in Inno Setup.
15. Press CTRL+F9 to compile a new installer.  The installer will be located in the [/AddinBundle/Output](/AddinBundle/Output) folder.
16. Digitally sign the installer.
17. Run the installer and verify the new add-in is available to Revit.  
18. Confirm the installed bundle contains digitally signed .dlls by opening `%appdata%\Autodesk\ApplicationPlugins\CesiumIonRevitAddin.bundle\Contents\2023\CesiumIonRevitAddin` and checking each `CesiumIonRevitAddin.dll` contains a digital signature.
19. Create a new release on GitHub: https://github.com/CesiumGS/cesium-ion-revit-add-in/releases/new.
    * Choose the new tag.
    * Copy the changelog into the description. Follow the format used in previous releases.
    * Upload the installer generated by Inno Setup.
20. Submit the installer to the Autodesk App Store for approval.