<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <TilersBinSourceDir>$(SolutionDir)..\tilers\build\bin\$(Configuration)\</TilersBinSourceDir>
    <TilersConfigSourceDir>$(SolutionDir)..\tilers\</TilersConfigSourceDir>
    <ImagesSourceDir>$(SolutionDir)CesiumIonRevitAddin\Images\</ImagesSourceDir>
    <AddinFileSource>$(SolutionDir)CesiumIonRevitAddin\CesiumIonRevit.addin</AddinFileSource>
    <ThirdPartySource>$(SolutionDir)ThirdParty.json</ThirdPartySource>
  </PropertyGroup>

  <ItemGroup>
    <TilerBinFiles Include="$(TilersBinSourceDir)**\*.*" />
    <TilerConfigFiles Include="$(TilersConfigSourceDir)ThirdParty.json" />
    <ImageFiles Include="$(ImagesSourceDir)**\*.*" />
    <AddinFile Include="$(AddinFileSource)" />
    <ThirdPartyFile Include="$(ThirdPartySource)" />
  </ItemGroup>

  <Target Name="CustomPostBuild" AfterTargets="Build">
    <Copy SourceFiles="@(TilerBinFiles)"
          DestinationFolder="$(TargetDir)tiler\%(RecursiveDir)"
          SkipUnchangedFiles="true" />

    <Copy SourceFiles="@(TilerConfigFiles)" 
          DestinationFolder="$(TargetDir)tiler\" />

    <Copy SourceFiles="@(ImageFiles)"
          DestinationFolder="$(TargetDir)Images\%(RecursiveDir)"
          SkipUnchangedFiles="true" />

    <Copy SourceFiles="@(AddinFile)" 
          DestinationFolder="$(TargetDir)..\" />

    <Copy SourceFiles="@(ThirdPartyFile)" 
          DestinationFolder="$(TargetDir)\" />
  </Target>

</Project>
